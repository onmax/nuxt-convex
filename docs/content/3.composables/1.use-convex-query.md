---
title: useConvexQuery
description: Subscribe to reactive Convex queries that auto-update.
---


Subscribe to a Convex query. The data updates automatically when the database changes.

## Usage

```vue [app/pages/tasks.vue]
<script setup lang="ts">
import { api } from '#convex/api'

const { data: tasks, isLoading, error } = useConvexQuery(api.tasks.list, { userId: 'user_123' })
</script>

<template>
  <div v-if="isLoading">
    Loading...
  </div>
  <div v-else-if="error">
    Error: {{ error.message }}
  </div>
  <ul v-else>
    <li v-for="task in tasks" :key="task._id">
      {{ task.title }}
    </li>
  </ul>
</template>
```

## Parameters

| Parameter | Type                | Description                      |
| --------- | ------------------- | -------------------------------- |
| `query`   | `FunctionReference` | The Convex query to subscribe to |
| `args`    | `object`            | Arguments to pass to the query   |

## Return Values

| Property    | Type                  | Description             |
| ----------- | --------------------- | ----------------------- |
| `data`      | `Ref<T \| undefined>` | Query result, reactive  |
| `isLoading` | `Ref<boolean>`        | True while initial load |
| `error`     | `Ref<Error \| null>`  | Error if query failed   |

## Reactive Arguments

Pass reactive arguments to re-run the query when they change:

```vue [app/pages/tasks.vue]
<script setup lang="ts">
import { api } from '#convex/api'

const userId = ref('user_123')
const { data: tasks } = useConvexQuery(api.tasks.list, computed(() => ({ userId: userId.value })))

function switchUser(newUserId: string) {
  userId.value = newUserId // Query re-runs automatically
}
</script>
```

## Conditional Queries

Skip the query by passing `undefined` as arguments:

```vue [app/pages/profile.vue]
<script setup lang="ts">
import { api } from '#convex/api'

const userId = ref<string | null>(null)

const { data: profile } = useConvexQuery(
  api.users.get,
  computed(() => userId.value ? { id: userId.value } : undefined)
)
</script>
```

When arguments are `undefined`, the query doesn't run and `data` remains `undefined`.

## Real-time Updates

Queries are reactive by default. When data changes on the server, all clients receive updates instantly:

```vue [app/pages/chat.vue]
<script setup lang="ts">
import { api } from '#convex/api'

// Messages update in real-time across all connected clients
const { data: messages } = useConvexQuery(api.messages.list, { channelId: 'general' })
</script>
```

No polling or manual refetching required.
